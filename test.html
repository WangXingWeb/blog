<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title></title>
    <link href="comp/highlight/styles/kimbie.dark.css" rel="stylesheet">
    <script src="http://cdn.bootcss.com/highlight.js/8.0/highlight.min.js"></script>
    <script src="comp/util.js"></script>
    <script >hljs.initHighlightingOnLoad();</script>
</head>
<style>

</style>
<body>

<div id="view">

</div>
<div id="imgContainer">

</div>

</body>
<script>
    window.onload=function () {
        var html='<h3 id="-">试一试</h3> <h4 id="-">来张图吧</h4> <p>正文歇一歇<br>对不起，打错了<br><img src="http://bmob-cdn-20127.b0.upaiyun.com/2018/06/28/28b9b3f2407d3c1780230061ebfbc501.jpg" alt="fileImg.name"><br>这张图片挺不错的</p> <p>的说法都是<br><img src="http://bmob-cdn-20127.b0.upaiyun.com/2018/06/28/f3b79dfd40716ee680df02bad361800b.jpg" alt="fileImg.name"></p>';

        //document.getElementById("view").innerHTML=pickupText(html);
        //document.getElementById("imgContainer").innerHTML=findImg(html);
        //var data=new Date();
        //alert(dateFormat(data,'yyyy-MM-dd hh:mm'));
        //alert(dateFormat('1987/08/23 23:25','yyyy-MM-dd hh*mm'));



    }
    function findImg (strs) {
        var imgs='';
        strs.replace(/<img\ssrc=[\'"](.+?)[\'"]\>/gi, function (match, capture) {
            imgs+=match;
            console.log('match'+match);
            console.log('capture'+capture);
        });
        return imgs;
    }
    function findInfo (strs, len) {
        var newLength = 0;
        var newStr = "";
        var chineseRegex = /[^\x00-\xff]/g;

        //过滤图片
        var reTag = /<img(?:.|\s)*?>/g;
        var str=strs.replace(reTag,'');

        //过滤html
        str=str.replace(/<[^>]+>/g,"");
        console.log(str);
        console.log(1111111111111111);
        var singleChar = "";
        var strLength = str.replace(chineseRegex,"**").length;

        for(var i = 0;i < strLength;i++) {
            singleChar = str.charAt(i).toString();
            if(singleChar.match(chineseRegex) != null) {
                newLength += 2;
            }else {
                newLength++;
            }
            if(newLength > len) {
                break;
            }
            newStr += singleChar;
        }
        if(strLength > len) {
            newStr += "...";
        }
        console.log(newStr);
        return newStr;
    }
</script>
</html>